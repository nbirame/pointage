<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="0">
        <!--Email template -->
        <record id="email_template_pointage_notification" model="mail.template">
            <field name="name">Présence de la semaine du {{object.last_week_start_date().strftime( '%Y-%m-%d')}} au {{object.last_week_end_date().strftime( '%Y-%m-%d')}}</field>
            <field name="email_from">fongip@fongip.sn</field>
            <field name="email_to">{{object.user_id.work_email or ''}}</field>
            <field name="subject">Présence de la semaine du {{object.last_week_start_date().strftime( '%Y-%m-%d')}} au {{object.last_week_end_date().strftime( '%Y-%m-%d')}}</field>
            <!--<field name="report_name">Rapport Pointage</field>-->
            <field name="model_id" ref="hr.model_hr_employee"/>
            <!--<field name="report_template" ref="pointage.report_pointage_presence"/>-->
            <field name="auto_delete" eval="True"/>
            <field name="body_html"><![CDATA[
            <t t-call="web.html_container">
                    <div>Bonjour, <br/>
                       <span style="font-weight: bold;" t-out="object.name or ''"></span><br/>
                       <p>Vous avez ci-dessous le tableau récapitulatif de votre présence du <t t-esc="object.last_week_start_date().strftime( '%Y-%m-%d')" t-options="{'widget': 'date'}"/> au <t t-esc="object.last_week_end_date().strftime( '%Y-%m-%d')" t-options="{'widget': 'date'}"/></p>
                       <!--<p>Vous avez travaillé
                            <t t-esc="object.hours_last_week" t-options="{'widget': 'float_time'}"/>
                            heures du <t t-esc="object.last_week_start_date().strftime( '%Y-%m-%d')" t-options="{'widget': 'date'}"/> au <t t-esc="object.last_week_end_date().strftime( '%Y-%m-%d')" t-options="{'widget': 'date'}"/>
                            avec un ecart de <t t-esc="object.ecart_worked_week()" t-options="{'widget': 'float_time'}"/>
                       </p>-->
                        <table class="table table-bordered" width="590" border="1" cellpadding="0" cellspacing="0" style="min-width: 590px; background-color: white; padding: 0px 8px 0px 8px; border-collapse:separate;">
                            <thead class="thead-light" style="background-color:#611610;">
                                <tr>
                                    <th></th>
                                    <th style="color:white;">Lundi</th>
                                    <th style="color:white;">Mardi</th>
                                    <th style="color:white;">Mercredi</th>
                                    <th style="color:white;">Jeudi</th>
                                    <th style="color:white;">Vendredi</th>
                                </tr>
                            </thead>
                            <tbody>
                            <tr>
                            <td style="background-color:#611610;"><p style="text-align:center;color:white;">Entrée<p></td>
                                <td t-if="object.get_work_hours_week()[0][0]">
                                    <span t-if="object.get_work_hours_week()[0][0].strftime('%H:%M:%S') == '00:00:00'">
                                        Absent
                                    </span>
                                    <span t-elif="object.get_work_hours_week()[0][0].strftime('%H:%M:%S') == '03:00:00'">
                                        En congé
                                    </span>
                                    <span t-elif="object.get_work_hours_week()[0][0].strftime('%H:%M:%S') == '04:00:00'">
                                        En atelié
                                    </span>
                                    <span t-elif="object.get_work_hours_week()[0][0].strftime('%H:%M:%S') == '02:00:00'">
                                        En mission
                                    </span>
                                    <span t-elif="object.get_work_hours_week()[0][0].strftime('%H:%M:%S') == '23:59:59'">
                                        <t t-esc="object.get_work_hours_week()[0][-3]"/>
                                    </span>
                                    <span t-else="">
                                        <t t-esc="object.get_work_hours_week()[0][0].strftime('%H:%M:%S')"/>
                                    </span>
                                </td>
                                <td t-if="object.get_work_hours_week()[1][:-1]">
                                    <span t-if="object.get_work_hours_week()[1][0].strftime('%H:%M:%S') == '00:00:00'">
                                        Absent
                                    </span>
                                    <span t-elif="object.get_work_hours_week()[1][0].strftime('%H:%M:%S') == '03:00:00'">
                                        En congé
                                    </span>
                                    <span t-elif="object.get_work_hours_week()[1][0].strftime('%H:%M:%S') == '03:00:00'">
                                        En atelié
                                    </span>
                                    <span t-elif="object.get_work_hours_week()[1][0].strftime('%H:%M:%S') == '02:00:00'">
                                        En mission
                                    </span>
                                    <span t-elif="object.get_work_hours_week()[1][0].strftime('%H:%M:%S') == '23:59:59'">
                                       <t t-esc="object.get_work_hours_week()[1][-3]"/>
                                    </span>
                                    <span t-else="">
                                        <t t-esc="object.get_work_hours_week()[1][0].strftime('%H:%M:%S')"/>
                                    </span>
                                </td>
                                <td t-if="object.get_work_hours_week()[2][:-1]">
                                    <span t-if="object.get_work_hours_week()[2][0].strftime('%H:%M:%S') == '00:00:00'">
                                        Absent
                                    </span>
                                    <span t-elif="object.get_work_hours_week()[2][0].strftime('%H:%M:%S') == '23:59:59'">
                                        <t t-esc="object.get_work_hours_week()[2][-3]"/>
                                    </span>
                                    <span t-elif="object.get_work_hours_week()[2][0].strftime('%H:%M:%S') == '03:00:00'">
                                        En congé
                                    </span>
                                    <span t-elif="object.get_work_hours_week()[2][0].strftime('%H:%M:%S') == '03:00:00'">
                                        En atelé
                                    </span>
                                    <span t-elif="object.get_work_hours_week()[2][0].strftime('%H:%M:%S') == '02:00:00'">
                                        En mission
                                    </span>
                                    <span t-else="">
                                        <t t-esc="object.get_work_hours_week()[2][0].strftime('%H:%M:%S')"/>
                                    </span>
                                </td>
                                <td t-if="object.get_work_hours_week()[3][:-1]">
                                    <span t-if="object.get_work_hours_week()[3][0].strftime('%H:%M:%S') == '00:00:00'">
                                        Absent
                                    </span>
                                    <span t-elif="object.get_work_hours_week()[3][0].strftime('%H:%M:%S') == '23:59:59'">

                                        <t t-esc="object.get_work_hours_week()[3][-3]"/>
                                    </span>
                                    <span t-elif="object.get_work_hours_week()[3][0].strftime('%H:%M:%S') == '03:00:00'">
                                        En congé
                                    </span>
                                    <span t-elif="object.get_work_hours_week()[3][0].strftime('%H:%M:%S') == '03:00:00'">
                                        En atelié
                                    </span>
                                    <span t-elif="object.get_work_hours_week()[3][0].strftime('%H:%M:%S') == '02:00:00'">
                                        En mission
                                    </span>
                                    <span t-else="">
                                        <t t-esc="object.get_work_hours_week()[3][0].strftime('%H:%M:%S')"/>
                                    </span>
                                </td>
                                <td t-if="object.get_work_hours_week()[4][:-1]">
                                    <span t-if="object.get_work_hours_week()[4][0].strftime('%H:%M:%S') == '00:00:00'">
                                        Absent
                                    </span>
                                    <span t-elif="object.get_work_hours_week()[4][0].strftime('%H:%M:%S') == '23:59:59'">
                                        Jour férié
                                    </span>
                                    <span t-elif="object.get_work_hours_week()[4][0].strftime('%H:%M:%S') == '03:00:00'">
                                         En congé
                                    </span>
                                    <span t-elif="object.get_work_hours_week()[4][0].strftime('%H:%M:%S') == '03:00:00'">
                                         En atelé
                                    </span>
                                    <span t-elif="object.get_work_hours_week()[4][0].strftime('%H:%M:%S') == '02:00:00'">
                                         En mission
                                    </span>
                                    <span t-else="">
                                        <t t-esc="object.get_work_hours_week()[4][0].strftime('%H:%M:%S')"/>
                                    </span>
                                </td>
                            </tr>

                            <tr>
                            <td style="background-color:#611610;"><p style="text-align:center;color:white;">Sortie<p></td>
                                <td t-if="object.get_work_hours_week()[0][1]">
                                    <span t-if="object.get_work_hours_week()[0][1].strftime('%H:%M:%S') == '00:00:00'">

                                    </span>
                                    <span t-elif="object.get_work_hours_week()[0][1].strftime('%H:%M:%S') == '23:59:59'"></span>
                                    <span t-elif="object.get_work_hours_week()[0][1].strftime('%H:%M:%S') == '03:00:00'"></span>
                                    <span t-elif="object.get_work_hours_week()[0][1].strftime('%H:%M:%S') == '04:00:00'"></span>
                                    <span t-elif="object.get_work_hours_week()[0][1].strftime('%H:%M:%S') == '02:00:00'"></span>
                                    <span t-else="">
                                        <t t-esc="object.get_work_hours_week()[0][1].strftime('%H:%M:%S')"/>
                                    </span>
                                </td>
                                <td t-if="object.get_work_hours_week()[1]">
                                    <span t-if="object.get_work_hours_week()[1][1]">
                                        <span t-if="object.get_work_hours_week()[1][1].strftime('%H:%M:%S') == '00:00:00'">
                                        </span>
                                        <span t-elif="object.get_work_hours_week()[1][1].strftime('%H:%M:%S') == '23:59:59'">
                                        </span>
                                        <span t-elif="object.get_work_hours_week()[1][1].strftime('%H:%M:%S') == '03:00:00'"></span>
                                        <span t-elif="object.get_work_hours_week()[1][1].strftime('%H:%M:%S') == '04:00:00'"></span>
                                        <span t-elif="object.get_work_hours_week()[1][1].strftime('%H:%M:%S') == '02:00:00'">
                                        </span>
                                        <span t-else="">
                                            <t t-esc="object.get_work_hours_week()[1][1].strftime('%H:%M:%S')"/>
                                        </span>
                                    </span>
                                    <span t-else=""></span>
                                </td>
                                <td t-if="object.get_work_hours_week()[2]">
                                    <span t-if="object.get_work_hours_week()[2][1]">
                                        <span t-if="object.get_work_hours_week()[2][1].strftime('%H:%M:%S') == '00:00:00'">
                                        </span>
                                        <span t-elif="object.get_work_hours_week()[2][1].strftime('%H:%M:%S') == '23:59:59'">
                                        </span>
                                        <span t-elif="object.get_work_hours_week()[2][1].strftime('%H:%M:%S') == '03:00:00'">
                                        </span>
                                        <span t-elif="object.get_work_hours_week()[2][1].strftime('%H:%M:%S') == '04:00:00'">
                                        </span>
                                        <span t-elif="object.get_work_hours_week()[2][1].strftime('%H:%M:%S') == '02:00:00'">
                                        </span>
                                        <span t-else="">
                                            <t t-esc="object.get_work_hours_week()[2][1].strftime('%H:%M:%S')"/>
                                        </span>
                                    </span>
                                    <span t-else=""></span>
                                </td>
                                <td t-if="object.get_work_hours_week()[3]">
                                    <span t-if="object.get_work_hours_week()[3][1]">
                                        <span t-if="object.get_work_hours_week()[3][1].strftime('%H:%M:%S') == '00:00:00'">
                                        </span>
                                         <span t-elif="object.get_work_hours_week()[3][1].strftime('%H:%M:%S') == '23:59:59'">
                                        </span>
                                        <span t-elif="object.get_work_hours_week()[3][1].strftime('%H:%M:%S') == '03:00:00'">
                                        </span>
                                        <span t-elif="object.get_work_hours_week()[3][1].strftime('%H:%M:%S') == '04:00:00'">
                                        </span>
                                        <span t-elif="object.get_work_hours_week()[3][1].strftime('%H:%M:%S') == '02:00:00'">
                                        </span>
                                        <span t-else="">
                                            <t t-esc="object.get_work_hours_week()[3][1].strftime('%H:%M:%S')"/>
                                        </span>
                                    </span>
                                    <span t-else=""></span>
                                </td>
                                <td t-if="object.get_work_hours_week()[4]">
                                    <span t-if="object.get_work_hours_week()[4][1]">
                                        <span t-if="object.get_work_hours_week()[4][1].strftime('%H:%M:%S') == '00:00:00'">
                                        </span>
                                         <span t-elif="object.get_work_hours_week()[4][1].strftime('%H:%M:%S') == '23:59:59'">
                                        </span>
                                        <span t-elif="object.get_work_hours_week()[4][1].strftime('%H:%M:%S') == '03:00:00'">
                                        </span>
                                        <span t-elif="object.get_work_hours_week()[4][1].strftime('%H:%M:%S') == '04:00:00'">
                                        </span>
                                        <span t-elif="object.get_work_hours_week()[4][1].strftime('%H:%M:%S') == '02:00:00'">
                                        </span>
                                        <span t-else="">
                                            <t t-esc="object.get_work_hours_week()[4][1].strftime('%H:%M:%S')"/>
                                        </span>
                                    </span>
                                    <span t-else=""></span>
                                </td>
                            </tr>

                            <tr>
                            <td style="background-color:#611610;"><p style="text-align:center;color:white;">Durée<p></td>
                                <td t-if="object.get_work_hours_week()[0]">
                                    <span t-if="object.get_work_hours_week()[0][-1] !=''">
                                        <t t-esc="object.get_work_hours_week()[0][-1]" t-options="{'widget': 'float_time'}"/>
                                    </span>
                                    <span t-else="">

                                    </span>
                                </td>
                                <td t-if="object.get_work_hours_week()[1]">
                                    <span t-if="object.get_work_hours_week()[1][-1] !=''">
                                        <t t-esc="object.get_work_hours_week()[1][-1]" t-options="{'widget': 'float_time'}"/>
                                    </span>
                                    <span t-else="">

                                    </span>
                                </td>
                                <td t-if="object.get_work_hours_week()[2]">
                                    <span t-if="object.get_work_hours_week()[2][-1] !=''">
                                        <t t-esc="object.get_work_hours_week()[2][-1]" t-options="{'widget': 'float_time'}"/>
                                    </span>
                                    <span t-else="">

                                    </span>
                                </td>
                                <td t-if="object.get_work_hours_week()[3]">
                                    <span t-if="object.get_work_hours_week()[3][-1] !=''">
                                        <t t-esc="object.get_work_hours_week()[3][-1]" t-options="{'widget': 'float_time'}"/>
                                    </span>
                                    <span t-else=""></span>
                                </td>
                                <td t-if="object.get_work_hours_week()[4]">
                                    <span t-if="object.get_work_hours_week()[4][-1] !=''">
                                        <t t-esc="object.get_work_hours_week()[4][-1]" t-options="{'widget': 'float_time'}"/>
                                    </span>
                                </td>
                                <span t-else=""></span>
                            </tr>
                            <tr>
                            <td style="background-color:#611610;"><p style="text-align:center;color:white;">Ecart<p></td>
                                <td t-if="object.get_work_hours_week()[0]">
                                    <span t-if="object.get_work_hours_week()[0][-2]">
                                        <t t-esc="object.get_work_hours_week()[0][-2]" t-options="{'widget': 'float_time'}"/>
                                    </span>
                                    <span t-else=""></span>
                                </td>
                                <td t-if="object.get_work_hours_week()[1]">
                                    <span t-if="object.get_work_hours_week()[1][-2]">

                                        <t t-esc="object.get_work_hours_week()[1][-2]" t-options="{'widget': 'float_time'}"/>
                                    </span>
                                </td>
                                <td t-if="object.get_work_hours_week()[2]">
                                    <span t-if="object.get_work_hours_week()[2][-2]">
                                        <t t-esc="object.get_work_hours_week()[2][-2]" t-options="{'widget': 'float_time'}"/>
                                    </span>
                                </td>
                                <td t-if="object.get_work_hours_week()[3]">
                                    <span t-if="object.get_work_hours_week()[3][-2]">
                                        <span>
                                            <t t-esc="object.get_work_hours_week()[3][-2]" t-options="{'widget': 'float_time'}"/>
                                        </span>
                                    </span>
                                </td>
                                <td t-if="object.get_work_hours_week()[4]">
                                    <span t-if="object.get_work_hours_week()[4][-2]">
                                        <span>
                                            <t t-esc="object.get_work_hours_week()[4][-2]" t-options="{'widget': 'float_time'}"/>
                                        </span>
                                    </span>
                                </td>
                            </tr>
                            <tr style="background-color:#611610;">

                                <td colspan="6" style="text-align:center;color:white;">
                                    Total présence:  <t t-esc="object.hours_last_week" t-options="{'widget': 'float_time'}"/>
                                /
                                <t t-esc="object.total_hours_of_week()" t-options="{'widget': 'float_time'}"/>
                                (<t t-esc="object.ecart_worked_week()" t-options="{'widget': 'float_time'}"/> Ecart)
                                </td>



                            </tr>

                            </tbody>
                        </table>
                    </div>
                    </t>
                        ]]>
            </field>
        </record>
        <record id="email_template_pointage_notification_report_month" model="mail.template">
            <field name="name">Présence</field>
            <field name="email_from">fongip@fongip.sn</field>
            <field name="email_to">{{object.user_id.work_email or ''}}</field>
            <field name="subject">Présence du mois dernier</field>
            <field name="report_name">Rapport Pointage</field>
            <field name="model_id" ref="hr.model_hr_employee"/>
            <field name="report_template" ref="pointage.report_pointage_presence"/>
            <field name="auto_delete" eval="True"/>
            <field name="body_html"><![CDATA[
            <t t-call="web.html_container">
            <h4>Présence dernier mois </h4>
                    <div>Bonjour, <br/>
                       <span t-out="object.name or ''"></span><br/>
                       <p>Vous avez travaillé c-joint la fiche récaputilative des pointages du mois dernier.

                        <p>
                            Cordialement le Directeur des ressources Humaines
                        </p>
                    </div>
                    </t>
                        ]]>
            </field>
        </record>
    </data>
</odoo>